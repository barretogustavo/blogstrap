<!DOCTYPE html>
<html>
  <head>
    <title>Gustavo Barreto Blog</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,700;1,100&display=swap" rel="stylesheet">
    <%= javascript_include_tag "application", "data-turbo-track": "reload", defer: true %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_include_tag "turbo", type: "module" %>
    <!-- JavaScript Quill -->
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <!-- CSS Quill -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <!-- Google ads -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5794959318667913"
     crossorigin="anonymous"></script>
  </head>

  <body onload="startQuill()" class="bg-light-white">
    <%= render 'layouts/topnavbar' %>
    <main class="container">
      <%= render 'layouts/flash_messages' %>
      <%= yield %>
    </main>
    <%= render 'layouts/footer' %>
    <script>
      const startQuill = (event) => {
      const quill = new Quill('#editor-container', {
      modules: {
      toolbar: [
      [{ header: [1, 2, 3, 4, 5, 6, false] }],
      [{ color: [] }],
      [{ size: [] }],
      [          'bold', 'italic', 'underline', 'strike',          { 'script': 'super'},          { 'script': 'sub' },          'code', 'link'        ],
      ['blockquote', 'code-block', 'image'],
      [{ list: 'ordered' }, { list: 'bullet' }],
      [{ align: ['center', 'right', 'justify', false] }],
      [{ indent: '-1'}, { indent: '+1' }]
      ]
      },
      placeholder: 'Compose an article...',
      theme: 'snow'
      });

      document.querySelector('form').addEventListener('submit', () => {
      const body = document.querySelector('input[class=article-content]');
      body.value = quill.root.innerHTML;
      });
      };
    </script>

  </body>
</html>
